---
layout: default
---

<section class="post">
{{ content }}
</section>
{% include jiathis.md %} 
<section class="meta">
  <span class="author">
    <a href="http://blog.linsword20.info">{{ site.author }}</a>
  </span>
  <span class="time">
    /
    <time datetime="{{ page.date | date:"%Y-%m-%d" }}">{{ page.date | date:"%Y-%m-%d" }}</time>
  </span>
  <br />
  <span class="license">
    Published under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">(CC) BY-NC-SA</a>
  </span>
  {% if page.categories %}
  <span class="categories">
    in categories
    {% for cat in page.categories %}
     <a href="/categories/#{{ cat }}" title="{{ cat }}">{{ cat }}</a>&nbsp;
    {% endfor %}
  </span>
  {% endif %}
  {% if page.tags %}
    <span class="tags">
      tagged with 
      {% for tag in page.tags %}
        <a href="/tags/#{{ tag }}" title="{{ tag }}">{{ tag }}</a>&nbsp;
      {% endfor %}
    </span>
  {% endif %}
  </section>

<div style="float: left; width: 160px;">
	<iframe width="100%" height="75" class="share_self" frameborder="0"
		scrolling="no"
		src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=75&fansRow=2&ptype=1&speed=0&skin=1&isTitle=0&noborder=0&isWeibo=1&isFans=0&uid=1262566221&verifier=9e0cf85c&colors=d6f3f7,FFFFFF,666666,0082cb,ecfbfd&dpc=1"></iframe>
</div>




<script type="text/javascript">
     <!--
 	$(document).ready(function(){
	 
	 
	 $('pre').addClass('prettyprint linenums');
     
     /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'linsword20'; // required: replace example with your forum shortname
    var disqus_url = '{{ site.url }}{{ page.url | remove:'index.html' }}';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    BYB.includeScript('http://' + disqus_shortname + '.disqus.com/embed.js',function(){});
     
     
     $('.post a').each(function(index,element)
	     {
		     	var href = $(this).attr('href');
			if(href)
			{
				if(href.indexOf('#') == 0)
				{}
				else if ( href.indexOf('/') == 0 || href.toLowerCase().indexOf('linsword20.info')>-1 )
				{}
				else if ($(element).has('img').length)
				{}
				else
				{
                    			$(this).attr('target','_blank');
                    			$(this).addClass('external');
                     		}
            		}
		       
		});
		
		
		if($('h2').length > 2){
            var h2 = [],h3 = [],tmpl = '<ul>',h2index = 0;

            var findScrollableElement = function(els) {
                for (var i = 0, argLength = arguments.length; i < argLength; i++) {
                    var el = arguments[i],
                    $scrollElement = $(el);
                    if ($scrollElement.scrollTop() > 0) {
                        return $scrollElement;
                    } else {
                        $scrollElement.scrollTop(1);
                        var isScrollable = $scrollElement.scrollTop() > 0;
                        $scrollElement.scrollTop(0);
                        if (isScrollable) {
                            return $scrollElement;
                        }
                    }
                }
                return [];
            };

            $.each($('h2,h3'),function(index,item){
                if(item.tagName.toLowerCase() == 'h2'){
                    var h2item = {};
                    h2item.name = $(item).text();
                    h2item.id = 'menuIndex'+index;
                    h2.push(h2item);
                    h2index++;
                }else{
                    var h3item = {};
                    h3item.name = $(item).text();
                    h3item.id = 'menuIndex'+index;
                    if(!h3[h2index-1]){
                        h3[h2index-1] = [];
                    }
                    h3[h2index-1].push(h3item);
                }
                item.id = 'menuIndex' + index
            });

            //添加h1
            tmpl += '<li class="h1"><a href="#" data-top="0">'+$('h1').text()+'</a></li>';

            for(var i=0;i<h2.length;i++){
                tmpl += '<li><a href="#" data-id="'+h2[i].id+'">'+h2[i].name+'</a></li>';
                if(h3[i]){
                    for(var j=0;j<h3[i].length;j++){
                        tmpl += '<li class="h3"><a href="#" data-id="'+h3[i][j].id+'">'+h3[i][j].name+'</a></li>';
                    }
                }
            }
            tmpl += '</ul>';

            var $scrollable = findScrollableElement('body','html');
            $('body').append('<div id="menuIndex"></div>');
            $('#menuIndex').append($(tmpl)).delegate('a','click',function(e){
                e.preventDefault();
                var scrollNum = $(this).attr('data-top') || $('#'+$(this).attr('data-id')).offset().top;
                //window.scrollTo(0,scrollNum-30);
                $scrollable.animate({ scrollTop: scrollNum-30 }, 400, 'swing');
            })

            $(window).load(function(){
                var scrollTop = [];
                $.each($('#menuIndex li a'),function(index,item){
                    if(!$(item).attr('data-top')){
                        var top = $('#'+$(item).attr('data-id')).offset().top;
                        scrollTop.push(top);
                        $(item).attr('data-top',top);
                    }
                });

                $(window).scroll(function(){
                    var nowTop = $(window).scrollTop(),index,length = scrollTop.length;
                    if(nowTop+60 > scrollTop[length-1]){
                        index = length
                    }else{
                        for(var i=0;i<length;i++){
                            if(nowTop+60 <= scrollTop[i]){
                                index = i
                                break;
                            }
                        }
                    }
                    $('#menuIndex li').removeClass('on')
                    $('#menuIndex li').eq(index).addClass('on')
                });
            });

            //用js计算屏幕的高度
            $('#menuIndex').css('max-height',$(window).height()-80);
        }
		
		
		
		
		
		$(document).keydown(function(e) {
            var url = false;
            if (e.which == 37 || e.which == 74) {  // Left arrow and J
                {% if page.previous %}
            url = '{{ site.url }}{{ page.previous.url }}';
            {% endif %}
            }
            else if (e.which == 39 || e.which == 75) {  // Right arrow and K
                {% if page.next %}
            url = '{{ site.url }}{{ page.next.url }}';
            {% endif %}
            }
            if (url) {
                window.location = url;
            }
        }); 
        
        BYB.includeScript('/media/js/prettify/prettify.js',function(){prettyPrint()});

        BYB.includeScript('http://v3.jiathis.com/code_mini/jia.js?uid=1353548552313533',function(){})
        
       
        
	 })
	-->
	</script>




